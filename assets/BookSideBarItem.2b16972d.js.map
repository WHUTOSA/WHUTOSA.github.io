{"version":3,"file":"BookSideBarItem.2b16972d.js","sources":["../../../../packages/theme-wulinks/src/client/components/BookSideBarItem.vue"],"sourcesContent":["<template>\r\n  <q-expansion-item v-if=\"item.subs.length\" expand-icon-toggle default-opened :content-inset-level=\"0.2\" icon=\"arrow_downward\">\r\n    <template v-slot:header>\r\n      <q-icon v-if=\"item.type === 'book'\" name=\"menu_book\" />\r\n      <router-link v-if=\"item.type !== 'blank'\" :to=\"item.path\" :class=\"sideBarClass(item.type)\" @click.prevent=\"jump(item)\">\r\n        {{ item.title }}\r\n      </router-link>\r\n      <span v-else :class=\"sideBarClass(item.type)\">{{ item.title }}</span>\r\n    </template>\r\n    <!-- 递归，并将非header的子项归到当前项的手风琴效果组 -->\r\n    <book-side-bar-item v-for=\"sub in item.subs\" :item=\"sub\" v-bind:key=\"sub.key\" :group=\"sub.type !== 'header' ? item.key : undefined\"> </book-side-bar-item>\r\n  </q-expansion-item>\r\n  <q-item v-else clickable v-ripple>\r\n    <q-item-section>\r\n      <router-link :to=\"item.path\" @click.prevent=\"jump(item)\">\r\n        <q-icon v-if=\"item.type === 'book'\" name=\"menu_book\" />\r\n        <span :class=\"sideBarClass(item.type)\">{{ item.title }}</span>\r\n      </router-link>\r\n    </q-item-section>\r\n  </q-item>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, computed, inject } from 'vue';\r\nimport { DocTreeNodeType, DocTreeNode } from '../../shared/docTree';\r\nimport { jumpToAnchorEventSymbol, goTopEventSymbol } from '../../shared/constant';\r\n\r\nexport class ItemInfo {\r\n  path: string;\r\n  key: string;\r\n  type: DocTreeNodeType;\r\n  title: string;\r\n  subs: Array<ItemInfo>;\r\n  level: number;\r\n  isAnchor: boolean;\r\n\r\n  transformDocTreeNodesToArray(subs: any, level: number, parentPath: string) {\r\n    if (!subs) {\r\n      return [];\r\n    }\r\n    const stepPathes = Object.keys(subs);\r\n    const result = Array<ItemInfo>(stepPathes.length);\r\n    for (let stepPath of stepPathes) {\r\n      const sub = subs[stepPath];\r\n      const isHeader = sub.type === 'header';\r\n      const subPath = `${parentPath !== '/' ? parentPath : ''}/${isHeader ? '#' : ''}${stepPath}`;\r\n      result[sub.sort] = new ItemInfo(sub, level, subPath, isHeader ? parentPath : subPath, isHeader);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  constructor(node: DocTreeNode, level: number, path: string, parentPath?: string, isAnchor?: boolean) {\r\n    this.path = path;\r\n    this.key = node.key;\r\n    this.type = node.type;\r\n    this.title = node.title;\r\n    this.subs = this.transformDocTreeNodesToArray(node.subs, level + 1, parentPath ?? path);\r\n    this.level = level;\r\n    this.isAnchor = isAnchor ?? false;\r\n  }\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'BookSideBarItem',\r\n  props: {\r\n    item: { type: ItemInfo }\r\n  },\r\n  setup() {\r\n    const sideBarClass = computed(() => (type: string) => type === 'header' ? 'side-bar-item side-bar-header' : 'side-bar-item sied-bar-doc');\r\n    const jumpToAnchor = inject(jumpToAnchorEventSymbol);\r\n    const goTop = inject(goTopEventSymbol);\r\n    const jump = (item: ItemInfo) => {\r\n      if (item.isAnchor) {\r\n        const matchGroups = `${item.path}`.match(/.*(#.*)$/);\r\n        if (matchGroups && matchGroups.length == 2 && jumpToAnchor) {\r\n          jumpToAnchor(matchGroups[1]);\r\n        }\r\n      } else if (goTop) {\r\n        goTop();\r\n      }\r\n    };\r\n    return { sideBarClass, jump };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.side-bar-item {\r\n  color: var(--c-text-accent);\r\n}\r\n\r\n.sied-bar-doc {\r\n  font-weight: bold;\r\n}\r\n\r\n.side-bar-header {\r\n  font-weight: normal;\r\n}\r\n</style>\r\n"],"names":["transformDocTreeNodesToArray","subs","level","parentPath","stepPathes","Object","keys","result","Array","length","stepPath","sub","isHeader","type","subPath","sort","ItemInfo","constructor","node","path","isAnchor","key","title","this","defineComponent","name","props","item","setup","sideBarClass","computed","jumpToAnchor","inject","jumpToAnchorEventSymbol","goTop","goTopEventSymbol","jump","matchGroups","match"],"mappings":"gKAoCEA,6BAA6BC,EAAWC,EAAeC,OAChDF,QACI,SAEHG,EAAaC,OAAOC,KAAKL,GACzBM,EAASC,MAAgBJ,EAAWK,gBACjCC,KAAYN,EAAY,OACzBO,EAAMV,EAAKS,GACXE,EAAwB,WAAbD,EAAIE,KACfC,EAAU,GAAkB,MAAfX,EAAqBA,EAAa,MAAMS,EAAW,IAAM,KAAKF,MAC1EC,EAAII,MAAQ,IAAIC,EAASL,EAAKT,EAAOY,EAASF,EAAWT,EAAaW,EAASF,UAEjFL,EAGTU,YAAYC,EAAmBhB,EAAeiB,EAAchB,EAAqBiB,QAC1ED,KAAOA,OACPE,IAAMH,EAAKG,SACXR,KAAOK,EAAKL,UACZS,MAAQJ,EAAKI,WACbrB,KAAOsB,KAAKvB,6BAA6BkB,EAAKjB,KAAMC,EAAQ,QAAGC,IAAcgB,QAC7EjB,MAAQA,OACRkB,eAAWA,MAIpB,MAAeI,EAAgB,CAC7BC,KAAM,kBACNC,MAAO,CACLC,KAAM,CAAEd,KAAMG,IAEhBY,cACQC,EAAeC,GAAS,IAAOjB,GAA0B,WAATA,EAAoB,gCAAkC,+BACtGkB,EAAeC,EAAOC,GACtBC,EAAQF,EAAOG,SAWd,CAAEN,aAAAA,EAAcO,KAVTT,OACRA,EAAKP,SAAU,OACXiB,EAAc,GAAGV,EAAKR,OAAOmB,MAAM,YACrCD,GAAqC,GAAtBA,EAAY5B,QAAesB,KAC/BM,EAAY,SAElBH"}